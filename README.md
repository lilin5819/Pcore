# Pcore

## 1.编译：

./build.sh  
注意：有cmake才能编译

## 1.目录简介:
```
.
├── include          // 通用头文件
├── pcore            // pcore代码或引用库
│   ├── adlist      // redis adlist 代替list.h
│   ├── ae          // redis ae事件库 可替换libuv
│   ├── cjson       // cjson库
│   ├── core               // pcore核心代码 ：注册模块，环境检测，垃圾回收，数据收集，日志收集
│   ├── dict        // redis字典(hash表)
│   ├── sds         // redis动态字符串
│   └── zmalloc     // redis 内存管理封装
├── src                     // main函数以及会话控制层,会话拓展层
└── test                    // 测试代码
```
外部依赖库：libuv openssl

## 2.核心层次:环境检测层、会话控制层、会话拓展层、垃圾回收层、数据收集层、日志处理层


## 3.TODO:

1. 完善网络检测层，自连自回收，实现勤奋检测和懒惰检测的自动切换和被动切换，网络检测层与网络控制分离
2. 内存回收待检查网络层泄漏点
3. 客户端关闭时，网络检测恢复为勤奋检测
4. 增加会话层waitack链消息回调检测，对超时未回复消息进行相应处理，做好会话层的消息等资源回收